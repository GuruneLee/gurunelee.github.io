---
dg-publish: true
date: 2023-11-20T00:00:00
gh-page: true
created: 2024-06-10 09:47
updated: 2025-03-31 13:07
---
[대용량 트래픽을 받는 모놀리식 서비스에 Woowa하게 RPC 적용하기](https://woowacon.com/presentations?presentationId=597)
![[Pasted image 20231121003934.png]]
- [[#이 세션을 선택한 이유|이 세션을 선택한 이유]]
- [[#기억에 남는 내용|기억에 남는 내용]]
	- [[#기억에 남는 내용#서비스 분리의 이유|서비스 분리의 이유]]
	- [[#기억에 남는 내용#어떤 방법으로 서비스를 분리할까 (의사결정 과정)|어떤 방법으로 서비스를 분리할까 (의사결정 과정)]]
		- [[#어떤 방법으로 서비스를 분리할까 (의사결정 과정)#라이브러리는 결국 똑같다|라이브러리는 결국 똑같다]]
		- [[#어떤 방법으로 서비스를 분리할까 (의사결정 과정)#RPC 가 RestAPI 보다 낫다|RPC 가 RestAPI 보다 낫다]]
	- [[#기억에 남는 내용#실제 분리 과정|실제 분리 과정]]
- [[#그래서, 무엇을 얻었나?|그래서, 무엇을 얻었나?]]

# 이 세션을 선택한 이유
지난 인프콘2022 에서 기술 세션만 잔뜩 들었다가 그...렇게 많이 얻어가진 못했다는 생각을 했었다. 내 뇌용량이나 경험치의 문제겠지만, 아무튼 그 때의 기억이 있어 이번 컨퍼런스에선 배울게 확실히 있어보이는 기술세션만 듣기로 마음을 먹었다.

정말 많은 기술 세션 중 이 세션에서만 RPC의 실 서비스 적용 사례를 소개하고 있었다. 나에겐 [RPC, Remote procedure call](https://en.wikipedia.org/wiki/Remote_procedure_call) 는 호기심이 생기지만 이해하기 힘든 개념이었고, 회사에서도 사용하지 않으니 학습 우선순위도 떨어지는 주제였다. 난 개념에 대해 이해하는 과정 중 '직관'이 굉장히 중요하다고 생각한다. 본 세션의 RPC 적용 사례를 듣고 RPC 의 개념에 대한 직관을 얻어가면 향후 RPC 에 대해 공부하고 적용할 일이 생겼을 때 큰 도움이 생길것이라 생각하였다. 

# 기억에 남는 내용
## 서비스 분리의 이유
본 세션은 모놀리식 서비스로부터 서비스를 분리하며 겪은 의사결정 과정을 공유하고 그 부산물인 WoowaBoot 를 소개한다. Code line 수가 늘어서 신규 개발자의 랜딩이 힘들었다는 것을 서비스 분리의 이유 중 하나로 소개하였는데, 유지보수 라는 모호한 말 대신 개발자가 겪는 정성적인 현상을 언급해준 것이 인상적이었다.

## 어떤 방법으로 서비스를 분리할까 (의사결정 과정)
모놀리식 서비스를 잘게 쪼개면 공통적으로 사용되는 공통 서비스는 한 데 묶는것이 좋다. 이 공통 서비스를 분리하는 방법 세 가지 중 (*라이브러리, RestAPI, RPC*) RPC 를 선택하기까지의 과정을 들을 수 있었는데 여기서 여러 개념에 대한 직관을 많이 얻어갈 수 있었다. ( 복기를 위해 적어두지만, 추후 강연 영상이 올라오면 기술에 관련된 것은 다시 정리해볼 생각이다 )

### 라이브러리는 결국 똑같다
라이브러리로 서비스를 분리하는 방법은 앱의 빌드 시간을 늘릴 수 있어 단점이 된다. 무엇보다 개발자는 문제가 발생하면 결국 라이브러리 코드를 열어볼 것이고, 코드가 개발자의 부담이 되는 문제는 해결되지 않는다. 
( 인터페이스 안쪽의 코드를 볼 수 있느냐 없느냐의 차이인가? 라이브러리가 개발자에게 부담이 된다는 말은 잘 이해가 가지 않는다. )
### RPC 가 RestAPI 보다 낫다
RestAPI 와 RPC 중 RPC 를 선택한 이유 중 크게 두 가지가 기억이 남는다.
1. RestAPI 의 클라이언트 호출코드
	- 같은 API 호출 코드가 공통 서비스를 호출하는 서비스에서 공통적으로 구현되어야 한다
	- -> RPC 도 똑같지 않나? 라고 생각했지만 RestAPI 와 RPC 의 차이점에 대한 중요한 힌트 같아서 적어두었다.
2. 버전관리
	- RPC 의 인터페이스 명세는 IDL 로서 정의된다. 이 명세 하나로 클라이언트 / 서버 측에 빌드해서 전달할 수 있으며 특히 버전의 하위호환성을 지원한다. IDL 로 정의되는 명세는 텍스트 등으로 정의되는 HTTP 명세에 비해 버전관리 측면에서 차별성 가진다.
	- -> 문서화와 문서 관리의 중요성을 다시금 생각해보았다. 이러한 측면까지 의사결정 과정에 포함시키는 것이 인상깊었다.

RPC 가 RestAPI 보다 빠르다고도 했는데, 이유가 생각이 나지 않는다.

## 실제 분리 과정
하.. 이 부분도 정~말 많은 기술적인 이야기가 쏟아져 나왔다. 내가 기억 하는 것은 Spring Boot 와 유사한 형태의 'WoowaBoot' 라이브러리를 만들었고, 이를 기존 Spring Boot 코드에 빠르게 적용할 수 있었다는 것. 특히 @WoowaBootController 어노테이션과 @RestController 를 같이 붙이면 API 와 RPC 빈이 둘 다 생성되서, 한 클래스로 두 가지 인터페이스 생성이 가능하다는 것. 그리고 서비스 매쉬라는 단어가 등장했다는 것...

이 부분을 들을 때 쯤, 내 공책에 이렇게 적혀있었다 ***내가 뭘 본거야?...?..***

# 그래서, 무엇을 얻었나?
언급했듯이 세션 내용을 모두 이해해보고자 들은 세션은 아니었지만, 내가 부족하다는 것은 확실히 이해했다는 점이 참 가슴아팠다. 그러나 언급했듯 기술에 대한 직관을 조금이나마 얻을 수 있다는 점에서 만족한다. 또, 내가 무엇을 더 배워야 하는지, 얼마나 부족한지 알게되고, 현재에 안주하지 않게 한다는 점도 이 세션에서 얻어간 것 중 하나다. 정진하자 정진.